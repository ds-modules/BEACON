{"cells":[{"cell_type":"markdown","metadata":{"id":"Z2y5qWt9Bpn8"},"source":["\n","\n","# **BEACO2N Notebook 6a: Mapping**\n","\n","Notebook developed by: *Skye Pickett, Alec Morgan, Lan Dinh, Su Min Park, Amy Castillo*\n"]},{"cell_type":"markdown","metadata":{"id":"MZ5HU2rTB8_S"},"source":["### Learning Outcomes\n","Working through this notebook, you will learn about:\n","1. Sources and causes of air pollution\n","1. Understanding data granularity\n","1. Accessing data types\n","1. Understanding units of concentration\n","1. Using `.groupby` and aggregate functions\n","\n","\n","## Table of Contents\n","1. All About Air Pollution\n","1. Introduction to the Data\n","> 2.1 Loading the Data\n","<br>2.2 Data Granularity\n","<br> 2.3 Column Names and Values\n","3. Grouping Data\n","\n","\n","*Note: In this notebook, there are some more advanced topics that are \"optional\". This means you can just read over these sections, don't worry about fully understanding these parts unless you are really interested. They may be useful later in the course, but for now they are not necessary, so feel free to just skim the parts labelled \"Optional\"!*\n"]},{"cell_type":"markdown","metadata":{"id":"F3e4mdG3CAkc"},"source":["<hr style=\"border: 2px solid #003262\">\n","<hr style=\"border: 2px solid #C9B676\">"]},{"cell_type":"markdown","metadata":{"id":"YVMtTbVvCDrr"},"source":["\n","\n","## 1. All About Air Pollution"]},{"cell_type":"markdown","metadata":{"id":"W2LuIifYCKT8"},"source":["Air pollution is defined to be **when air is contaminated by chemical, physical, or biological agents that change the characteristics of the atmosphere**. There are a lot of causes of air pollution! <br>Here are 4 common causes:\n","1. Burning fossil fuels\n","2. Industrial emission\n","3. Indoor air pollution\n","4. Wildfires\n","\n","\n","Air pollution can be moved downward through the atmoshphere by **transport** (movement caused by wind flow), **dispersion** (local turbulence), and **deposition** (precipitation, scavenging, and sedimentation). In this notebook, we will create visualizations that showcase movement of wildfire smoke into the Bay Area.\n","\n","Let's gain a bit more understanding of the wildfire event that we will be using data from in this notebook. **Read the [Smoke from Oregon and Northern California fires turns skies hazy above Berkeley](https://www.berkeleyside.org/2023/08/30/smoke-from-oregon-and-northern-california-fires-turns-skies-hazy-above-berkeley\n",") article. Summarize 5 key points the article makes in the text cell below.**\n"]},{"cell_type":"markdown","source":["**YOUR SUMMARY HERE:**\n","\n","*Type your answer here. Double-click to edit this cell and replace this text with your answer.*"],"metadata":{"id":"7eVubKIAG-ER"}},{"cell_type":"markdown","metadata":{"id":"xQ1rSR8_Cgp1"},"source":["***\n","##2. Introduction to the Data\n","\n","In this section, we will learn more about the data that will help us to understand wildfire smoke movement.\n","\n","\n","\n","First, let's load some libraries we will need throughout this notebook. **Run the cell below to import the necessary libraries**. The output of the cell may be long, but feel free to ignore it! We have to install various packages for our visualizations in this notebook.\n","\n","*Reminder:* To run a cell...\n","* Click the **Play icon** in the left gutter of the cell **OR**\n","* Click **Shift+Enter** or **Shift+Return** on your computer keyboard to run the cell and move focus to the next cell"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":1000},"executionInfo":{"elapsed":36605,"status":"ok","timestamp":1709157189214,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"ErOisfmwiC7z","outputId":"de66d67d-502b-48b1-efbd-1edb7bf810a0"},"outputs":[{"output_type":"stream","name":"stdout","text":["Collecting geoplot\n","  Downloading geoplot-0.5.1-py3-none-any.whl (28 kB)\n","Requirement already satisfied: matplotlib>=3.1.2 in /usr/local/lib/python3.10/dist-packages (from geoplot) (3.7.1)\n","Requirement already satisfied: seaborn in /usr/local/lib/python3.10/dist-packages (from geoplot) (0.13.1)\n","Requirement already satisfied: pandas in /usr/local/lib/python3.10/dist-packages (from geoplot) (1.5.3)\n","Requirement already satisfied: geopandas>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from geoplot) (0.13.2)\n","Collecting cartopy (from geoplot)\n","  Downloading Cartopy-0.22.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (11.8 MB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m11.8/11.8 MB\u001b[0m \u001b[31m35.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hCollecting mapclassify>=2.1 (from geoplot)\n","  Downloading mapclassify-2.6.1-py3-none-any.whl (38 kB)\n","Collecting contextily>=1.0.0 (from geoplot)\n","  Downloading contextily-1.5.1-py3-none-any.whl (17 kB)\n","Requirement already satisfied: geopy in /usr/local/lib/python3.10/dist-packages (from contextily>=1.0.0->geoplot) (2.3.0)\n","Collecting mercantile (from contextily>=1.0.0->geoplot)\n","  Downloading mercantile-1.2.1-py3-none-any.whl (14 kB)\n","Requirement already satisfied: pillow in /usr/local/lib/python3.10/dist-packages (from contextily>=1.0.0->geoplot) (9.4.0)\n","Collecting rasterio (from contextily>=1.0.0->geoplot)\n","  Downloading rasterio-1.3.9-cp310-cp310-manylinux2014_x86_64.whl (20.6 MB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m20.6/20.6 MB\u001b[0m \u001b[31m32.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (from contextily>=1.0.0->geoplot) (2.31.0)\n","Requirement already satisfied: joblib in /usr/local/lib/python3.10/dist-packages (from contextily>=1.0.0->geoplot) (1.3.2)\n","Requirement already satisfied: xyzservices in /usr/local/lib/python3.10/dist-packages (from contextily>=1.0.0->geoplot) (2023.10.1)\n","Requirement already satisfied: fiona>=1.8.19 in /usr/local/lib/python3.10/dist-packages (from geopandas>=0.9.0->geoplot) (1.9.5)\n","Requirement already satisfied: packaging in /usr/local/lib/python3.10/dist-packages (from geopandas>=0.9.0->geoplot) (23.2)\n","Requirement already satisfied: pyproj>=3.0.1 in /usr/local/lib/python3.10/dist-packages (from geopandas>=0.9.0->geoplot) (3.6.1)\n","Requirement already satisfied: shapely>=1.7.1 in /usr/local/lib/python3.10/dist-packages (from geopandas>=0.9.0->geoplot) (2.0.3)\n","Requirement already satisfied: networkx>=2.7 in /usr/local/lib/python3.10/dist-packages (from mapclassify>=2.1->geoplot) (3.2.1)\n","Requirement already satisfied: numpy>=1.23 in /usr/local/lib/python3.10/dist-packages (from mapclassify>=2.1->geoplot) (1.25.2)\n","Requirement already satisfied: scikit-learn>=1.0 in /usr/local/lib/python3.10/dist-packages (from mapclassify>=2.1->geoplot) (1.2.2)\n","Requirement already satisfied: scipy>=1.8 in /usr/local/lib/python3.10/dist-packages (from mapclassify>=2.1->geoplot) (1.11.4)\n","Requirement already satisfied: contourpy>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib>=3.1.2->geoplot) (1.2.0)\n","Requirement already satisfied: cycler>=0.10 in /usr/local/lib/python3.10/dist-packages (from matplotlib>=3.1.2->geoplot) (0.12.1)\n","Requirement already satisfied: fonttools>=4.22.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib>=3.1.2->geoplot) (4.49.0)\n","Requirement already satisfied: kiwisolver>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib>=3.1.2->geoplot) (1.4.5)\n","Requirement already satisfied: pyparsing>=2.3.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib>=3.1.2->geoplot) (3.1.1)\n","Requirement already satisfied: python-dateutil>=2.7 in /usr/local/lib/python3.10/dist-packages (from matplotlib>=3.1.2->geoplot) (2.8.2)\n","Requirement already satisfied: pytz>=2020.1 in /usr/local/lib/python3.10/dist-packages (from pandas->geoplot) (2023.4)\n","Requirement already satisfied: pyshp>=2.1 in /usr/local/lib/python3.10/dist-packages (from cartopy->geoplot) (2.3.1)\n","Requirement already satisfied: attrs>=19.2.0 in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (23.2.0)\n","Requirement already satisfied: certifi in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (2024.2.2)\n","Requirement already satisfied: click~=8.0 in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (8.1.7)\n","Requirement already satisfied: click-plugins>=1.0 in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (1.1.1)\n","Requirement already satisfied: cligj>=0.5 in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (0.7.2)\n","Requirement already satisfied: six in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (1.16.0)\n","Requirement already satisfied: setuptools in /usr/local/lib/python3.10/dist-packages (from fiona>=1.8.19->geopandas>=0.9.0->geoplot) (67.7.2)\n","Requirement already satisfied: threadpoolctl>=2.0.0 in /usr/local/lib/python3.10/dist-packages (from scikit-learn>=1.0->mapclassify>=2.1->geoplot) (3.3.0)\n","Requirement already satisfied: geographiclib<3,>=1.52 in /usr/local/lib/python3.10/dist-packages (from geopy->contextily>=1.0.0->geoplot) (2.0)\n","Collecting affine (from rasterio->contextily>=1.0.0->geoplot)\n","  Downloading affine-2.4.0-py3-none-any.whl (15 kB)\n","Collecting snuggs>=1.4.1 (from rasterio->contextily>=1.0.0->geoplot)\n","  Downloading snuggs-1.4.7-py3-none-any.whl (5.4 kB)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests->contextily>=1.0.0->geoplot) (3.3.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests->contextily>=1.0.0->geoplot) (3.6)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests->contextily>=1.0.0->geoplot) (2.0.7)\n","Installing collected packages: snuggs, mercantile, affine, rasterio, mapclassify, contextily, cartopy, geoplot\n","Successfully installed affine-2.4.0 cartopy-0.22.0 contextily-1.5.1 geoplot-0.5.1 mapclassify-2.6.1 mercantile-1.2.1 rasterio-1.3.9 snuggs-1.4.7\n","Collecting celluloid\n","  Downloading celluloid-0.2.0-py3-none-any.whl (5.4 kB)\n","Requirement already satisfied: matplotlib in /usr/local/lib/python3.10/dist-packages (from celluloid) (3.7.1)\n","Requirement already satisfied: contourpy>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (1.2.0)\n","Requirement already satisfied: cycler>=0.10 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (0.12.1)\n","Requirement already satisfied: fonttools>=4.22.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (4.49.0)\n","Requirement already satisfied: kiwisolver>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (1.4.5)\n","Requirement already satisfied: numpy>=1.20 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (1.25.2)\n","Requirement already satisfied: packaging>=20.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (23.2)\n","Requirement already satisfied: pillow>=6.2.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (9.4.0)\n","Requirement already satisfied: pyparsing>=2.3.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (3.1.1)\n","Requirement already satisfied: python-dateutil>=2.7 in /usr/local/lib/python3.10/dist-packages (from matplotlib->celluloid) (2.8.2)\n","Requirement already satisfied: six>=1.5 in /usr/local/lib/python3.10/dist-packages (from python-dateutil>=2.7->matplotlib->celluloid) (1.16.0)\n","Installing collected packages: celluloid\n","Successfully installed celluloid-0.2.0\n"]},{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.HTML object>"],"text/html":["<style>.container { width:100% !important; }</style>"]},"metadata":{}}],"source":["# Run this cell\n","# Necessary libraries\n","!pip install geoplot\n","import geoplot as gplt\n","import geopandas as gpd\n","import geoplot.crs as gcrs\n","import pandas as pd\n","import numpy as np\n","import matplotlib.pyplot as plt\n","import seaborn as sns\n","import geopandas as gpd\n","import datetime\n","!pip install celluloid\n","from celluloid import Camera\n","\n","from IPython.core.display import display, HTML\n","display(HTML(\"<style>.container { width:100% !important; }</style>\"))"]},{"cell_type":"markdown","metadata":{"id":"SvTpwegieBNc"},"source":["###2.1 Loading the Data\n","\n","As we've seen in the previous notebooks, before doing any visualizations we need to first load our data into a `DataFrame`. We will be working with more data from [**Berkeley Environmental Air Quality and CO2 Network (BEACO2N)**](http://beacon.berkeley.edu/about/). In the cell below, we will load the data into our `air_pollution` table."]},{"cell_type":"code","source":["## RUN THIS CELL!\n","url = 'https://codeload.github.com/skyepickett/beacon-mapping-files/zip/refs/heads/main'\n","\n","import requests\n","import shutil\n","\n","response = requests.get(url)\n","with open(\"data.zip\", \"wb\") as f:\n","    f.write(response.content)\n","\n","# Extract the zip file in the current directory\n","shutil.unpack_archive(\"data.zip\", \"\", \"zip\")"],"metadata":{"id":"m7FK-PoK-5JA"},"execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":790},"executionInfo":{"elapsed":166,"status":"ok","timestamp":1709157189809,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"vhCXhnkWjT9b","outputId":"a7756fb5-c7e8-4a70-db90-50f0a96a37a6"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["      id               node_name_long   node_name  node_folder_id     lat  \\\n","0      1  Stone Edge Farms (Vineyard)    vineyard             116  38.291   \n","1      2   Stone Edge Farms (Turbine)     turbine             161  38.289   \n","2      3         Piedmont High School         PHS             983  37.824   \n","3      4  Montclair Elementary School  montclair2            1033  37.831   \n","4      5              Port of Oakland        port             158  37.796   \n","..   ...                          ...         ...             ...     ...   \n","153  275                      Es52002     Es52002            1115  37.873   \n","154  276                      Bs92202     Bs92202            1121  37.873   \n","155  277                      Es22202     Es22202            1118  37.873   \n","156  278                      Es42002     Es42002            1098  37.873   \n","157  279                      Es32202     Es32202            1097  37.873   \n","\n","         lng  height_above_ground  height_above_sea    deployed  \\\n","0   -122.506                  NaN         57.940933  2015-02-02   \n","1   -122.503                  NaN         54.551334  2015-02-02   \n","2   -122.233                 10.0         91.290054  2013-05-09   \n","3   -122.213                  4.0        185.787262  2013-05-08   \n","4   -122.279                 32.0          3.464535  2013-03-14   \n","..       ...                  ...               ...         ...   \n","153  122.256                  NaN               NaN         NaN   \n","154  122.256                  NaN               NaN         NaN   \n","155  122.256                  NaN               NaN  2022-03-01   \n","156  122.256                  NaN               NaN         NaN   \n","157  122.256                  NaN               NaN         NaN   \n","\n","                datetime    PM_ug/m3 PM_ug/m3_QC_level  co_ppm  \\\n","0    2016-02-13 21:00:00 -999.000000                 1  -999.0   \n","1    2018-07-31 21:00:00   10.809019                1a  -999.0   \n","2    2022-04-20 08:00:00   16.348270                 1  -999.0   \n","3    2022-04-20 08:00:00    7.512339                1a  -999.0   \n","4    2016-12-22 21:00:00 -999.000000                 1  -999.0   \n","..                   ...         ...               ...     ...   \n","153  2022-04-04 11:00:00 -999.000000                 1  -999.0   \n","154  2022-03-29 12:00:00 -999.000000                 1  -999.0   \n","155  2022-03-29 14:00:00 -999.000000                 1  -999.0   \n","156  2022-03-28 09:00:00 -999.000000                 1  -999.0   \n","157  2022-04-04 09:00:00 -999.000000                 1  -999.0   \n","\n","    co_ppm_QC_level     co2_ppm co2_ppm_QC_level       groups  \n","0                 1 -999.000000                1   ['Sonoma']  \n","1                 1  408.018046               1a   ['Sonoma']  \n","2                 1  226.740480               1a  ['Alameda']  \n","3                 1  422.975012               1a  ['Alameda']  \n","4                 1  451.092945                1  ['Alameda']  \n","..              ...         ...              ...          ...  \n","153               1 -999.000000                1   ['Canada']  \n","154               1 -999.000000                1    ['Brown']  \n","155               1 -999.000000                1   ['Canada']  \n","156               1 -999.000000                1   ['Canada']  \n","157               1 -999.000000                1   ['Canada']  \n","\n","[158 rows x 17 columns]"],"text/html":["\n","  <div id=\"df-dd7ffe80-f4f0-4e25-b798-6f901b8b4121\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id</th>\n","      <th>node_name_long</th>\n","      <th>node_name</th>\n","      <th>node_folder_id</th>\n","      <th>lat</th>\n","      <th>lng</th>\n","      <th>height_above_ground</th>\n","      <th>height_above_sea</th>\n","      <th>deployed</th>\n","      <th>datetime</th>\n","      <th>PM_ug/m3</th>\n","      <th>PM_ug/m3_QC_level</th>\n","      <th>co_ppm</th>\n","      <th>co_ppm_QC_level</th>\n","      <th>co2_ppm</th>\n","      <th>co2_ppm_QC_level</th>\n","      <th>groups</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>1</td>\n","      <td>Stone Edge Farms (Vineyard)</td>\n","      <td>vineyard</td>\n","      <td>116</td>\n","      <td>38.291</td>\n","      <td>-122.506</td>\n","      <td>NaN</td>\n","      <td>57.940933</td>\n","      <td>2015-02-02</td>\n","      <td>2016-02-13 21:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>['Sonoma']</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2</td>\n","      <td>Stone Edge Farms (Turbine)</td>\n","      <td>turbine</td>\n","      <td>161</td>\n","      <td>38.289</td>\n","      <td>-122.503</td>\n","      <td>NaN</td>\n","      <td>54.551334</td>\n","      <td>2015-02-02</td>\n","      <td>2018-07-31 21:00:00</td>\n","      <td>10.809019</td>\n","      <td>1a</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>408.018046</td>\n","      <td>1a</td>\n","      <td>['Sonoma']</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3</td>\n","      <td>Piedmont High School</td>\n","      <td>PHS</td>\n","      <td>983</td>\n","      <td>37.824</td>\n","      <td>-122.233</td>\n","      <td>10.0</td>\n","      <td>91.290054</td>\n","      <td>2013-05-09</td>\n","      <td>2022-04-20 08:00:00</td>\n","      <td>16.348270</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>226.740480</td>\n","      <td>1a</td>\n","      <td>['Alameda']</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4</td>\n","      <td>Montclair Elementary School</td>\n","      <td>montclair2</td>\n","      <td>1033</td>\n","      <td>37.831</td>\n","      <td>-122.213</td>\n","      <td>4.0</td>\n","      <td>185.787262</td>\n","      <td>2013-05-08</td>\n","      <td>2022-04-20 08:00:00</td>\n","      <td>7.512339</td>\n","      <td>1a</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>422.975012</td>\n","      <td>1a</td>\n","      <td>['Alameda']</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5</td>\n","      <td>Port of Oakland</td>\n","      <td>port</td>\n","      <td>158</td>\n","      <td>37.796</td>\n","      <td>-122.279</td>\n","      <td>32.0</td>\n","      <td>3.464535</td>\n","      <td>2013-03-14</td>\n","      <td>2016-12-22 21:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>451.092945</td>\n","      <td>1</td>\n","      <td>['Alameda']</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>153</th>\n","      <td>275</td>\n","      <td>Es52002</td>\n","      <td>Es52002</td>\n","      <td>1115</td>\n","      <td>37.873</td>\n","      <td>122.256</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>2022-04-04 11:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>['Canada']</td>\n","    </tr>\n","    <tr>\n","      <th>154</th>\n","      <td>276</td>\n","      <td>Bs92202</td>\n","      <td>Bs92202</td>\n","      <td>1121</td>\n","      <td>37.873</td>\n","      <td>122.256</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>2022-03-29 12:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>['Brown']</td>\n","    </tr>\n","    <tr>\n","      <th>155</th>\n","      <td>277</td>\n","      <td>Es22202</td>\n","      <td>Es22202</td>\n","      <td>1118</td>\n","      <td>37.873</td>\n","      <td>122.256</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>2022-03-01</td>\n","      <td>2022-03-29 14:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>['Canada']</td>\n","    </tr>\n","    <tr>\n","      <th>156</th>\n","      <td>278</td>\n","      <td>Es42002</td>\n","      <td>Es42002</td>\n","      <td>1098</td>\n","      <td>37.873</td>\n","      <td>122.256</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>2022-03-28 09:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>['Canada']</td>\n","    </tr>\n","    <tr>\n","      <th>157</th>\n","      <td>279</td>\n","      <td>Es32202</td>\n","      <td>Es32202</td>\n","      <td>1097</td>\n","      <td>37.873</td>\n","      <td>122.256</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>2022-04-04 09:00:00</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>-999.0</td>\n","      <td>1</td>\n","      <td>-999.000000</td>\n","      <td>1</td>\n","      <td>['Canada']</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>158 rows × 17 columns</p>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-dd7ffe80-f4f0-4e25-b798-6f901b8b4121')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-dd7ffe80-f4f0-4e25-b798-6f901b8b4121 button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-dd7ffe80-f4f0-4e25-b798-6f901b8b4121');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","\n","<div id=\"df-3c5f9828-67dd-49f6-8779-05504a07bd9e\">\n","  <button class=\"colab-df-quickchart\" onclick=\"quickchart('df-3c5f9828-67dd-49f6-8779-05504a07bd9e')\"\n","            title=\"Suggest charts\"\n","            style=\"display:none;\">\n","\n","<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","     width=\"24px\">\n","    <g>\n","        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/>\n","    </g>\n","</svg>\n","  </button>\n","\n","<style>\n","  .colab-df-quickchart {\n","      --bg-color: #E8F0FE;\n","      --fill-color: #1967D2;\n","      --hover-bg-color: #E2EBFA;\n","      --hover-fill-color: #174EA6;\n","      --disabled-fill-color: #AAA;\n","      --disabled-bg-color: #DDD;\n","  }\n","\n","  [theme=dark] .colab-df-quickchart {\n","      --bg-color: #3B4455;\n","      --fill-color: #D2E3FC;\n","      --hover-bg-color: #434B5C;\n","      --hover-fill-color: #FFFFFF;\n","      --disabled-bg-color: #3B4455;\n","      --disabled-fill-color: #666;\n","  }\n","\n","  .colab-df-quickchart {\n","    background-color: var(--bg-color);\n","    border: none;\n","    border-radius: 50%;\n","    cursor: pointer;\n","    display: none;\n","    fill: var(--fill-color);\n","    height: 32px;\n","    padding: 0;\n","    width: 32px;\n","  }\n","\n","  .colab-df-quickchart:hover {\n","    background-color: var(--hover-bg-color);\n","    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);\n","    fill: var(--button-hover-fill-color);\n","  }\n","\n","  .colab-df-quickchart-complete:disabled,\n","  .colab-df-quickchart-complete:disabled:hover {\n","    background-color: var(--disabled-bg-color);\n","    fill: var(--disabled-fill-color);\n","    box-shadow: none;\n","  }\n","\n","  .colab-df-spinner {\n","    border: 2px solid var(--fill-color);\n","    border-color: transparent;\n","    border-bottom-color: var(--fill-color);\n","    animation:\n","      spin 1s steps(1) infinite;\n","  }\n","\n","  @keyframes spin {\n","    0% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","      border-left-color: var(--fill-color);\n","    }\n","    20% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    30% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","      border-right-color: var(--fill-color);\n","    }\n","    40% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    60% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","    }\n","    80% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-bottom-color: var(--fill-color);\n","    }\n","    90% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","    }\n","  }\n","</style>\n","\n","  <script>\n","    async function quickchart(key) {\n","      const quickchartButtonEl =\n","        document.querySelector('#' + key + ' button');\n","      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.\n","      quickchartButtonEl.classList.add('colab-df-spinner');\n","      try {\n","        const charts = await google.colab.kernel.invokeFunction(\n","            'suggestCharts', [key], {});\n","      } catch (error) {\n","        console.error('Error during call to suggestCharts:', error);\n","      }\n","      quickchartButtonEl.classList.remove('colab-df-spinner');\n","      quickchartButtonEl.classList.add('colab-df-quickchart-complete');\n","    }\n","    (() => {\n","      let quickchartButtonEl =\n","        document.querySelector('#df-3c5f9828-67dd-49f6-8779-05504a07bd9e button');\n","      quickchartButtonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","    })();\n","  </script>\n","</div>\n","    </div>\n","  </div>\n"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"dataframe","variable_name":"air_pollution","repr_error":"'str' object has no attribute 'empty'"}},"metadata":{},"execution_count":3}],"source":["# Load the data from get_latest_nodes.csv into a Pandas DataFrame\n","file_name = \"/content/beacon-mapping-files-main/get_latest_nodes.csv\"\n","air_pollution = pd.read_csv(file_name, on_bad_lines='skip')\n","air_pollution"]},{"cell_type":"markdown","metadata":{"id":"FZEWm-QTeFkl"},"source":["### 2.2 Data Granularity\n"]},{"cell_type":"markdown","source":["After loading in our data, it's important to take a look to see what kind of data we are working with and what information it may tell us. It's important to know what each **record (i.e. row)** represents and what the values in the records mean.\n","\n","We know that we will be working with data about air pollutants. Take a look at the DataFrame we've made above. Each row in this DataFrame represents information collected from a node from the BEACO2N sensor network (each node is at a different location)."],"metadata":{"id":"ERXPbdt6JKVe"}},{"cell_type":"markdown","metadata":{"id":"zOUH-39KeM9e"},"source":["###2.3 Column Names and Values\n","\n","Another way to understand the data we are working with is to look at the column names and some values. The function `.columns` lists the column names of the DataFrame preceding it:"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":344,"status":"ok","timestamp":1709157190148,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"Al0YnTsNBK1s","outputId":"a9a2a000-31e3-4b96-c676-3a4b6b1f7be5"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["Index(['id', 'node_name_long', 'node_name', 'node_folder_id', 'lat', 'lng',\n","       'height_above_ground', 'height_above_sea', 'deployed', 'datetime',\n","       'PM_ug/m3', 'PM_ug/m3_QC_level', 'co_ppm', 'co_ppm_QC_level', 'co2_ppm',\n","       'co2_ppm_QC_level', 'groups'],\n","      dtype='object')"]},"metadata":{},"execution_count":4}],"source":["air_pollution.columns"]},{"cell_type":"markdown","metadata":{"id":"1MgVIf3hBN7m"},"source":["**Looking at the column names, describe what information you think the `air_pollution` DataFrame tells us.**"]},{"cell_type":"markdown","metadata":{"id":"Jk91FRdwKK3c"},"source":["*Type your answer here. Double-click to edit this cell and replace this text with your answer.*"]},{"cell_type":"markdown","metadata":{"id":"l4t0vdyr3G3y"},"source":["It's important to look at the **data types** *(ie, string, integer, float)* of the values of certain columns. The method **`.dtypes`** tells us the data type of each column. As you can see, some columns do not give descriptive data types because they may include multiple data types such as NAN values (more on this later)."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":9,"status":"ok","timestamp":1709157190149,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"rNgl9Vn43VrZ","outputId":"49960045-b06c-42d8-8f61-502550d9bfc4"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["id                       int64\n","node_name_long          object\n","node_name               object\n","node_folder_id           int64\n","lat                    float64\n","lng                    float64\n","height_above_ground    float64\n","height_above_sea       float64\n","deployed                object\n","datetime                object\n","PM_ug/m3               float64\n","PM_ug/m3_QC_level       object\n","co_ppm                 float64\n","co_ppm_QC_level         object\n","co2_ppm                float64\n","co2_ppm_QC_level        object\n","groups                  object\n","dtype: object"]},"metadata":{},"execution_count":5}],"source":["air_pollution.dtypes"]},{"cell_type":"markdown","metadata":{"id":"rB8E3Etc3VUA"},"source":["Another way to find the data type of any specific value is to select that value and use the **`type()` function**.\n","<br>**Here's how:**<br>First, we want to select the column we want (recall: `dataframe[\"col_name\"]` does this).<br> Then, we'll select the first (or any) value of the column series (which we can use `[0]`).<br><br> The cell below achieves this. Feel free to replace `'node_name'` with any column name from `air_pollution` to see the data type of another column."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":7,"status":"ok","timestamp":1709157190149,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"MPgJD4im5mSh","outputId":"ef95076f-3c08-4cb0-f6c6-9715b2619a60"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["str"]},"metadata":{},"execution_count":6}],"source":["type(air_pollution['node_name'][0])"]},{"cell_type":"markdown","metadata":{"id":"tlAQ_Q7E7uGb"},"source":["####2.3.1 Units\n","Since we are dealing with data representing air pollution concentrations, knowing the units of each pollutant is **so important** for understanding!\n","\n","**Our data contains these three columns: `PM_ug/m3`, `co_ppm`, and `co2_ppm`. Which units correspond with each and what do they stand for (*ie, what does ppm mean*)?**"]},{"cell_type":"markdown","metadata":{"id":"1ooAaoGO-WNS"},"source":["*Type your answer here. Double-click to edit this cell and replace this text with your answer.*"]},{"cell_type":"markdown","metadata":{"id":"KAoZsq1pClun"},"source":["***\n","##3. Grouping Data"]},{"cell_type":"markdown","source":["Pandas [**`dataframe.groupby()`**](https://www.geeksforgeeks.org/python-pandas-dataframe-groupby/) is used to split the data into groups based on some criteria and to apply a function to the formed categories. It makes the task of splitting the Dataframe over some criteria really easy and efficient!\n","\n","\n"],"metadata":{"id":"7UKGV5h1GlJo"}},{"cell_type":"markdown","metadata":{"id":"166sCJkj3L9N"},"source":["*First off*, let replace invalid input `-999` as NaN (*review previous lessons if you're unsure why!*)."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":399},"executionInfo":{"elapsed":5,"status":"ok","timestamp":1709157190149,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"5VU4ij0OqGJy","outputId":"dfd2e265-0e66-4959-f87b-9ae35ecd9c9c"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   id               node_name_long   node_name  node_folder_id     lat  \\\n","0   1  Stone Edge Farms (Vineyard)    vineyard             116  38.291   \n","1   2   Stone Edge Farms (Turbine)     turbine             161  38.289   \n","2   3         Piedmont High School         PHS             983  37.824   \n","3   4  Montclair Elementary School  montclair2            1033  37.831   \n","4   5              Port of Oakland        port             158  37.796   \n","\n","       lng  height_above_ground  height_above_sea    deployed  \\\n","0 -122.506                  NaN         57.940933  2015-02-02   \n","1 -122.503                  NaN         54.551334  2015-02-02   \n","2 -122.233                 10.0         91.290054  2013-05-09   \n","3 -122.213                  4.0        185.787262  2013-05-08   \n","4 -122.279                 32.0          3.464535  2013-03-14   \n","\n","              datetime   PM_ug/m3 PM_ug/m3_QC_level  co_ppm co_ppm_QC_level  \\\n","0  2016-02-13 21:00:00        NaN                 1     NaN               1   \n","1  2018-07-31 21:00:00  10.809019                1a     NaN               1   \n","2  2022-04-20 08:00:00  16.348270                 1     NaN               1   \n","3  2022-04-20 08:00:00   7.512339                1a     NaN               1   \n","4  2016-12-22 21:00:00        NaN                 1     NaN               1   \n","\n","      co2_ppm co2_ppm_QC_level       groups  \n","0         NaN                1   ['Sonoma']  \n","1  408.018046               1a   ['Sonoma']  \n","2  226.740480               1a  ['Alameda']  \n","3  422.975012               1a  ['Alameda']  \n","4  451.092945                1  ['Alameda']  "],"text/html":["\n","  <div id=\"df-777e0c4c-b83e-472a-8af9-d7b53671c55f\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id</th>\n","      <th>node_name_long</th>\n","      <th>node_name</th>\n","      <th>node_folder_id</th>\n","      <th>lat</th>\n","      <th>lng</th>\n","      <th>height_above_ground</th>\n","      <th>height_above_sea</th>\n","      <th>deployed</th>\n","      <th>datetime</th>\n","      <th>PM_ug/m3</th>\n","      <th>PM_ug/m3_QC_level</th>\n","      <th>co_ppm</th>\n","      <th>co_ppm_QC_level</th>\n","      <th>co2_ppm</th>\n","      <th>co2_ppm_QC_level</th>\n","      <th>groups</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>1</td>\n","      <td>Stone Edge Farms (Vineyard)</td>\n","      <td>vineyard</td>\n","      <td>116</td>\n","      <td>38.291</td>\n","      <td>-122.506</td>\n","      <td>NaN</td>\n","      <td>57.940933</td>\n","      <td>2015-02-02</td>\n","      <td>2016-02-13 21:00:00</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>['Sonoma']</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2</td>\n","      <td>Stone Edge Farms (Turbine)</td>\n","      <td>turbine</td>\n","      <td>161</td>\n","      <td>38.289</td>\n","      <td>-122.503</td>\n","      <td>NaN</td>\n","      <td>54.551334</td>\n","      <td>2015-02-02</td>\n","      <td>2018-07-31 21:00:00</td>\n","      <td>10.809019</td>\n","      <td>1a</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>408.018046</td>\n","      <td>1a</td>\n","      <td>['Sonoma']</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3</td>\n","      <td>Piedmont High School</td>\n","      <td>PHS</td>\n","      <td>983</td>\n","      <td>37.824</td>\n","      <td>-122.233</td>\n","      <td>10.0</td>\n","      <td>91.290054</td>\n","      <td>2013-05-09</td>\n","      <td>2022-04-20 08:00:00</td>\n","      <td>16.348270</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>226.740480</td>\n","      <td>1a</td>\n","      <td>['Alameda']</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4</td>\n","      <td>Montclair Elementary School</td>\n","      <td>montclair2</td>\n","      <td>1033</td>\n","      <td>37.831</td>\n","      <td>-122.213</td>\n","      <td>4.0</td>\n","      <td>185.787262</td>\n","      <td>2013-05-08</td>\n","      <td>2022-04-20 08:00:00</td>\n","      <td>7.512339</td>\n","      <td>1a</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>422.975012</td>\n","      <td>1a</td>\n","      <td>['Alameda']</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5</td>\n","      <td>Port of Oakland</td>\n","      <td>port</td>\n","      <td>158</td>\n","      <td>37.796</td>\n","      <td>-122.279</td>\n","      <td>32.0</td>\n","      <td>3.464535</td>\n","      <td>2013-03-14</td>\n","      <td>2016-12-22 21:00:00</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>451.092945</td>\n","      <td>1</td>\n","      <td>['Alameda']</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-777e0c4c-b83e-472a-8af9-d7b53671c55f')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-777e0c4c-b83e-472a-8af9-d7b53671c55f button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-777e0c4c-b83e-472a-8af9-d7b53671c55f');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","\n","<div id=\"df-2913bcbf-59a9-451e-8519-a580ef35253c\">\n","  <button class=\"colab-df-quickchart\" onclick=\"quickchart('df-2913bcbf-59a9-451e-8519-a580ef35253c')\"\n","            title=\"Suggest charts\"\n","            style=\"display:none;\">\n","\n","<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","     width=\"24px\">\n","    <g>\n","        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/>\n","    </g>\n","</svg>\n","  </button>\n","\n","<style>\n","  .colab-df-quickchart {\n","      --bg-color: #E8F0FE;\n","      --fill-color: #1967D2;\n","      --hover-bg-color: #E2EBFA;\n","      --hover-fill-color: #174EA6;\n","      --disabled-fill-color: #AAA;\n","      --disabled-bg-color: #DDD;\n","  }\n","\n","  [theme=dark] .colab-df-quickchart {\n","      --bg-color: #3B4455;\n","      --fill-color: #D2E3FC;\n","      --hover-bg-color: #434B5C;\n","      --hover-fill-color: #FFFFFF;\n","      --disabled-bg-color: #3B4455;\n","      --disabled-fill-color: #666;\n","  }\n","\n","  .colab-df-quickchart {\n","    background-color: var(--bg-color);\n","    border: none;\n","    border-radius: 50%;\n","    cursor: pointer;\n","    display: none;\n","    fill: var(--fill-color);\n","    height: 32px;\n","    padding: 0;\n","    width: 32px;\n","  }\n","\n","  .colab-df-quickchart:hover {\n","    background-color: var(--hover-bg-color);\n","    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);\n","    fill: var(--button-hover-fill-color);\n","  }\n","\n","  .colab-df-quickchart-complete:disabled,\n","  .colab-df-quickchart-complete:disabled:hover {\n","    background-color: var(--disabled-bg-color);\n","    fill: var(--disabled-fill-color);\n","    box-shadow: none;\n","  }\n","\n","  .colab-df-spinner {\n","    border: 2px solid var(--fill-color);\n","    border-color: transparent;\n","    border-bottom-color: var(--fill-color);\n","    animation:\n","      spin 1s steps(1) infinite;\n","  }\n","\n","  @keyframes spin {\n","    0% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","      border-left-color: var(--fill-color);\n","    }\n","    20% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    30% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","      border-right-color: var(--fill-color);\n","    }\n","    40% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    60% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","    }\n","    80% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-bottom-color: var(--fill-color);\n","    }\n","    90% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","    }\n","  }\n","</style>\n","\n","  <script>\n","    async function quickchart(key) {\n","      const quickchartButtonEl =\n","        document.querySelector('#' + key + ' button');\n","      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.\n","      quickchartButtonEl.classList.add('colab-df-spinner');\n","      try {\n","        const charts = await google.colab.kernel.invokeFunction(\n","            'suggestCharts', [key], {});\n","      } catch (error) {\n","        console.error('Error during call to suggestCharts:', error);\n","      }\n","      quickchartButtonEl.classList.remove('colab-df-spinner');\n","      quickchartButtonEl.classList.add('colab-df-quickchart-complete');\n","    }\n","    (() => {\n","      let quickchartButtonEl =\n","        document.querySelector('#df-2913bcbf-59a9-451e-8519-a580ef35253c button');\n","      quickchartButtonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","    })();\n","  </script>\n","</div>\n","    </div>\n","  </div>\n"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"dataframe","variable_name":"air_pollution","repr_error":"'str' object has no attribute 'empty'"}},"metadata":{},"execution_count":7}],"source":["air_pollution = air_pollution.replace({-999.00000:np.NaN}) # Replace invalid inputs\n","air_pollution.head()"]},{"cell_type":"markdown","source":["Next, run the following cell where we make a new column **`area`** based on modifying the column `'groups'` so that `area` contains the names without the brackets (ie, `['Alameda']` --> `Alameda`)."],"metadata":{"id":"P7vRnT5BHMaA"}},{"cell_type":"code","source":["## Run this cell\n","air_pollution['area'] = air_pollution['groups'].str.extract(r\"\\[\\'(\\w*)\\'\\]\")\n","air_pollution.head()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":399},"id":"3qXBcwmEHLgY","executionInfo":{"status":"ok","timestamp":1709157190290,"user_tz":480,"elapsed":145,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"}},"outputId":"ea48686d-971b-477d-9333-31d47237e06e"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["   id               node_name_long   node_name  node_folder_id     lat  \\\n","0   1  Stone Edge Farms (Vineyard)    vineyard             116  38.291   \n","1   2   Stone Edge Farms (Turbine)     turbine             161  38.289   \n","2   3         Piedmont High School         PHS             983  37.824   \n","3   4  Montclair Elementary School  montclair2            1033  37.831   \n","4   5              Port of Oakland        port             158  37.796   \n","\n","       lng  height_above_ground  height_above_sea    deployed  \\\n","0 -122.506                  NaN         57.940933  2015-02-02   \n","1 -122.503                  NaN         54.551334  2015-02-02   \n","2 -122.233                 10.0         91.290054  2013-05-09   \n","3 -122.213                  4.0        185.787262  2013-05-08   \n","4 -122.279                 32.0          3.464535  2013-03-14   \n","\n","              datetime   PM_ug/m3 PM_ug/m3_QC_level  co_ppm co_ppm_QC_level  \\\n","0  2016-02-13 21:00:00        NaN                 1     NaN               1   \n","1  2018-07-31 21:00:00  10.809019                1a     NaN               1   \n","2  2022-04-20 08:00:00  16.348270                 1     NaN               1   \n","3  2022-04-20 08:00:00   7.512339                1a     NaN               1   \n","4  2016-12-22 21:00:00        NaN                 1     NaN               1   \n","\n","      co2_ppm co2_ppm_QC_level       groups     area  \n","0         NaN                1   ['Sonoma']   Sonoma  \n","1  408.018046               1a   ['Sonoma']   Sonoma  \n","2  226.740480               1a  ['Alameda']  Alameda  \n","3  422.975012               1a  ['Alameda']  Alameda  \n","4  451.092945                1  ['Alameda']  Alameda  "],"text/html":["\n","  <div id=\"df-3a32b5a0-5ccd-4b26-a981-096181da4c60\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id</th>\n","      <th>node_name_long</th>\n","      <th>node_name</th>\n","      <th>node_folder_id</th>\n","      <th>lat</th>\n","      <th>lng</th>\n","      <th>height_above_ground</th>\n","      <th>height_above_sea</th>\n","      <th>deployed</th>\n","      <th>datetime</th>\n","      <th>PM_ug/m3</th>\n","      <th>PM_ug/m3_QC_level</th>\n","      <th>co_ppm</th>\n","      <th>co_ppm_QC_level</th>\n","      <th>co2_ppm</th>\n","      <th>co2_ppm_QC_level</th>\n","      <th>groups</th>\n","      <th>area</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>1</td>\n","      <td>Stone Edge Farms (Vineyard)</td>\n","      <td>vineyard</td>\n","      <td>116</td>\n","      <td>38.291</td>\n","      <td>-122.506</td>\n","      <td>NaN</td>\n","      <td>57.940933</td>\n","      <td>2015-02-02</td>\n","      <td>2016-02-13 21:00:00</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>['Sonoma']</td>\n","      <td>Sonoma</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2</td>\n","      <td>Stone Edge Farms (Turbine)</td>\n","      <td>turbine</td>\n","      <td>161</td>\n","      <td>38.289</td>\n","      <td>-122.503</td>\n","      <td>NaN</td>\n","      <td>54.551334</td>\n","      <td>2015-02-02</td>\n","      <td>2018-07-31 21:00:00</td>\n","      <td>10.809019</td>\n","      <td>1a</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>408.018046</td>\n","      <td>1a</td>\n","      <td>['Sonoma']</td>\n","      <td>Sonoma</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3</td>\n","      <td>Piedmont High School</td>\n","      <td>PHS</td>\n","      <td>983</td>\n","      <td>37.824</td>\n","      <td>-122.233</td>\n","      <td>10.0</td>\n","      <td>91.290054</td>\n","      <td>2013-05-09</td>\n","      <td>2022-04-20 08:00:00</td>\n","      <td>16.348270</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>226.740480</td>\n","      <td>1a</td>\n","      <td>['Alameda']</td>\n","      <td>Alameda</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4</td>\n","      <td>Montclair Elementary School</td>\n","      <td>montclair2</td>\n","      <td>1033</td>\n","      <td>37.831</td>\n","      <td>-122.213</td>\n","      <td>4.0</td>\n","      <td>185.787262</td>\n","      <td>2013-05-08</td>\n","      <td>2022-04-20 08:00:00</td>\n","      <td>7.512339</td>\n","      <td>1a</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>422.975012</td>\n","      <td>1a</td>\n","      <td>['Alameda']</td>\n","      <td>Alameda</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5</td>\n","      <td>Port of Oakland</td>\n","      <td>port</td>\n","      <td>158</td>\n","      <td>37.796</td>\n","      <td>-122.279</td>\n","      <td>32.0</td>\n","      <td>3.464535</td>\n","      <td>2013-03-14</td>\n","      <td>2016-12-22 21:00:00</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>NaN</td>\n","      <td>1</td>\n","      <td>451.092945</td>\n","      <td>1</td>\n","      <td>['Alameda']</td>\n","      <td>Alameda</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-3a32b5a0-5ccd-4b26-a981-096181da4c60')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-3a32b5a0-5ccd-4b26-a981-096181da4c60 button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-3a32b5a0-5ccd-4b26-a981-096181da4c60');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","\n","<div id=\"df-cd5ce64f-fee1-4ccd-b35d-0ae0420c5e3f\">\n","  <button class=\"colab-df-quickchart\" onclick=\"quickchart('df-cd5ce64f-fee1-4ccd-b35d-0ae0420c5e3f')\"\n","            title=\"Suggest charts\"\n","            style=\"display:none;\">\n","\n","<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","     width=\"24px\">\n","    <g>\n","        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/>\n","    </g>\n","</svg>\n","  </button>\n","\n","<style>\n","  .colab-df-quickchart {\n","      --bg-color: #E8F0FE;\n","      --fill-color: #1967D2;\n","      --hover-bg-color: #E2EBFA;\n","      --hover-fill-color: #174EA6;\n","      --disabled-fill-color: #AAA;\n","      --disabled-bg-color: #DDD;\n","  }\n","\n","  [theme=dark] .colab-df-quickchart {\n","      --bg-color: #3B4455;\n","      --fill-color: #D2E3FC;\n","      --hover-bg-color: #434B5C;\n","      --hover-fill-color: #FFFFFF;\n","      --disabled-bg-color: #3B4455;\n","      --disabled-fill-color: #666;\n","  }\n","\n","  .colab-df-quickchart {\n","    background-color: var(--bg-color);\n","    border: none;\n","    border-radius: 50%;\n","    cursor: pointer;\n","    display: none;\n","    fill: var(--fill-color);\n","    height: 32px;\n","    padding: 0;\n","    width: 32px;\n","  }\n","\n","  .colab-df-quickchart:hover {\n","    background-color: var(--hover-bg-color);\n","    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);\n","    fill: var(--button-hover-fill-color);\n","  }\n","\n","  .colab-df-quickchart-complete:disabled,\n","  .colab-df-quickchart-complete:disabled:hover {\n","    background-color: var(--disabled-bg-color);\n","    fill: var(--disabled-fill-color);\n","    box-shadow: none;\n","  }\n","\n","  .colab-df-spinner {\n","    border: 2px solid var(--fill-color);\n","    border-color: transparent;\n","    border-bottom-color: var(--fill-color);\n","    animation:\n","      spin 1s steps(1) infinite;\n","  }\n","\n","  @keyframes spin {\n","    0% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","      border-left-color: var(--fill-color);\n","    }\n","    20% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    30% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","      border-right-color: var(--fill-color);\n","    }\n","    40% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    60% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","    }\n","    80% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-bottom-color: var(--fill-color);\n","    }\n","    90% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","    }\n","  }\n","</style>\n","\n","  <script>\n","    async function quickchart(key) {\n","      const quickchartButtonEl =\n","        document.querySelector('#' + key + ' button');\n","      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.\n","      quickchartButtonEl.classList.add('colab-df-spinner');\n","      try {\n","        const charts = await google.colab.kernel.invokeFunction(\n","            'suggestCharts', [key], {});\n","      } catch (error) {\n","        console.error('Error during call to suggestCharts:', error);\n","      }\n","      quickchartButtonEl.classList.remove('colab-df-spinner');\n","      quickchartButtonEl.classList.add('colab-df-quickchart-complete');\n","    }\n","    (() => {\n","      let quickchartButtonEl =\n","        document.querySelector('#df-cd5ce64f-fee1-4ccd-b35d-0ae0420c5e3f button');\n","      quickchartButtonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","    })();\n","  </script>\n","</div>\n","    </div>\n","  </div>\n"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"dataframe","variable_name":"air_pollution","repr_error":"'str' object has no attribute 'empty'"}},"metadata":{},"execution_count":8}]},{"cell_type":"markdown","metadata":{"id":"sz9Mv_cDpEwM"},"source":["When we deal with a lot of information in one DataFrame (like `air_pollution`), grouping data is like creating subsets of similar things. It makes it easier to ask questions about each subset, like finding the average or counting how many items are in each of those sets. In Pandas, the function `groupby` acts as a mapping of all rows into smaller sets.\n","\n","For example, we can group our `air_pollution` data by the column `area`."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"C6w9L4BRwx0y"},"outputs":[],"source":["grouped_data = air_pollution.groupby('area')"]},{"cell_type":"markdown","metadata":{"id":"D66NmCv84SUt"},"source":["Once the data is grouped, we can perform various aggregate functions on each group independently. Let's say we want to see the average `PM_ug/m3` per area. To do this, we first select the column `PM_ug/m3` on our **`grouped_data`** followed by dot notation and the aggregate function (which is in this case, `.mean()`) The complete code is as follows:"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":8,"status":"ok","timestamp":1709157190291,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"},"user_tz":480},"id":"rFCwCbpiB-Ge","outputId":"2d0957a7-9164-48f7-fed4-29795cf04cda"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["area\n","Alameda         23.212710\n","Brown                 NaN\n","Canada                NaN\n","ContraCosta     55.721439\n","Glasgow          7.030839\n","Houston         44.771489\n","Leicester             NaN\n","NZ                    NaN\n","Sacramento            NaN\n","SanFrancisco          NaN\n","Sonoma          10.809019\n","USC                   NaN\n","Vallejo         17.531657\n","Name: PM_ug/m3, dtype: float64"]},"metadata":{},"execution_count":10}],"source":["grouped_data['PM_ug/m3'].mean()"]},{"cell_type":"markdown","metadata":{"id":"C58qK_Vj6C0G"},"source":["Our result is a list of areas in our `air_pollution` data and the average `PM_ug/m3` for each area. This, however, is not informative because there are many missing values in our data (just like any other data in real life) -- notice the `NaN`s!"]},{"cell_type":"markdown","metadata":{"id":"5tOd3Y2E7VNQ"},"source":["These are other aggregate functions we can use with `groupby`:\n","\n","\n","*   `min()`: Find the minimum value\n","*   `max()`: Find the maximum value\n","*   `count()`: Find the number of items\n","*   `sum()`: Find the total value\n","\n","\n","\n"]},{"cell_type":"markdown","metadata":{"id":"IRpNgYi88BFE"},"source":["Let's practice! Let's find the **number of nodes** in **each area**.\n","\n",">Let's break this down first: <br>We want to know something about each area, so what should we group by?<br> *We'll group by the column `area`!*<br>Next we want to find the *total* number of nodes. Each row in our data set is representative of a different node! Which function should we use to find the total number of rows per group?<br>\n","*We'll aggregate by the `count()` function!*\n","<br>Lastly, since we care about the number of nodes, let's select a column about the nodes.<br>\n","*We'll use brackets to select `'node_name'`.*"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"U3W944Vf7-rG","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1709157190291,"user_tz":480,"elapsed":5,"user":{"displayName":"Lan Dinh","userId":"03387644907726434616"}},"outputId":"8306f371-5ed7-47d1-948f-19646b9b9723"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["area\n","Alameda         24\n","Brown           25\n","Canada           5\n","ContraCosta      5\n","Glasgow         10\n","Houston         18\n","Leicester        4\n","NZ               2\n","Sacramento       1\n","SanFrancisco     6\n","Sonoma           2\n","USC             12\n","Vallejo         14\n","Name: node_name, dtype: int64"]},"metadata":{},"execution_count":11}],"source":["air_pollution.groupby('area').count()['node_name']"]},{"cell_type":"markdown","metadata":{"id":"k7sFj41gDC9E"},"source":["You've now learned some pretty essential data analysis steps such as understanding/interpreting the data and even grouping data by certain attributes to find some patterns! Let's reflect on why these initial steps are important before continuing with our data analysis.\n","\n","Consider this: **Why is understanding what data we're working with important?**"]},{"cell_type":"markdown","source":["**YOUR ANSWER HERE:**<br>\n","Double-click on this cell and replace this text with your response."],"metadata":{"id":"wHIz1B74LHDA"}},{"cell_type":"markdown","source":["***\n","#### You've finished with the Mapping **In Class notebook** and are **ready to begin the Mapping Student Exploration notebook**! Good job!"],"metadata":{"id":"d5wkQ4i1K6fs"}}],"metadata":{"colab":{"provenance":[]},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}